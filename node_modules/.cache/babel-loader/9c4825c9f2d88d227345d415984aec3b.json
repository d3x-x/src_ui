{"ast":null,"code":"import React,{Component}from'react';import*as Yup from'yup';import{Page,Navbar,BlockHeader,List,ListItem,ListInput,ListButton}from'framework7-react';import{Formik,Form}from'formik';import rpc from'utils/rpc';import prettify from'utils/prettify';export default class FactionMoney extends Component{constructor(){super(...arguments);this.state={balance:0};}componentDidMount(){rpc.callServer('Faction-GetMoney').then(this.setCurrentBalance.bind(this));}setCurrentBalance(amount){this.setState(()=>({balance:amount}));}async moneyOperation(type,amount){const balance=await rpc.callServer('FactionLeader-ChangeMoney',[type,amount]);this.setCurrentBalance(balance);}render(){const{balance}=this.state;return/*#__PURE__*/React.createElement(Page,null,/*#__PURE__*/React.createElement(Navbar,{title:\"\\u0411\\u0430\\u043B\\u0430\\u043D\\u0441 \\u043E\\u0440\\u0433\\u0430\\u043Di\\u0437\\u0430\\u0446i\\u0457\"}),/*#__PURE__*/React.createElement(List,{inset:true},/*#__PURE__*/React.createElement(ListItem,{title:\"\\u041F\\u043E\\u0442\\u043E\\u0447\\u043D\\u0438\\u0439 \\u0431\\u0430\\u043B\\u0430\\u043D\\u0441\",after:prettify.price(balance)})),/*#__PURE__*/React.createElement(BlockHeader,null,\"\\u0424i\\u043D\\u0430\\u043D\\u0441\\u043E\\u0432i \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446i\\u0457\"),/*#__PURE__*/React.createElement(Formik,{initialValues:{sum:'',type:'add'},validationSchema:Yup.object({sum:Yup.number().required().min(1).max(100000000)}),onSubmit:values=>this.moneyOperation(values.type,+values.sum)},_ref=>{let{values,handleChange,submitForm,setFieldValue}=_ref;return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(List,{inset:true},/*#__PURE__*/React.createElement(ListInput,{clearButton:true,name:\"sum\",type:\"number\",placeholder:\"\\u0421\\u0443\\u043C\\u0430\",value:values.sum,onChange:handleChange,onInputClear:handleChange})),/*#__PURE__*/React.createElement(List,{inset:true},/*#__PURE__*/React.createElement(ListButton,{title:\"\\u041F\\u043E\\u043F\\u043E\\u0432\\u043D\\u0438\\u0442\\u0438\",onClick:()=>{setFieldValue('type','add');submitForm();}}),/*#__PURE__*/React.createElement(ListButton,{title:\"\\u0417\\u043D\\u044F\\u0442\\u0438\",color:\"red\",onClick:()=>{setFieldValue('type','withdraw');submitForm();}})));}));}}","map":null,"metadata":{},"sourceType":"module"}