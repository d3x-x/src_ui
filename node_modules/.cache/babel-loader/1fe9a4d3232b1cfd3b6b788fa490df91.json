{"ast":null,"code":"import React from'react';import{capitalize,trim}from'lodash';import{Formik,Form}from'formik';import*as Yup from'yup';import rpc from'utils/rpc';import{showNotification}from'utils/notifications';import GradientButton from'components/Common/gradient-button';import OutlineButton from'components/Common/outline-button';import PrimaryTitle from'components/Common/primary-title';import Field from'./field';export default function Register(_ref){let{setEmail,toLogin}=_ref;async function onSubmit(values,_ref2){let{setFieldError}=_ref2;const data={email:trim(values.email).toLowerCase(),password:trim(values.password),firstName:capitalize(trim(values.firstName)),lastName:capitalize(trim(values.lastName)),code:trim(values.code)};try{await rpc.callServer('Auth-SignUp',data);await rpc.callClient('Auth-SuccessRegister',data.email);setEmail(data.email);toLogin();}catch(err){setFieldError(err.field,err.message);}}return/*#__PURE__*/React.createElement(\"div\",{className:\"auth_register\"},/*#__PURE__*/React.createElement(PrimaryTitle,{className:\"auth_title\"},\"\\u0420\\u0435\\u0454\\u0441\\u0442\\u0440\\u0430\\u0446i\\u044F\"),/*#__PURE__*/React.createElement(Formik,{initialValues:{firstName:'',lastName:'',email:'',password:'',passwordConfirm:'',code:''},validationSchema:Yup.object({email:Yup.string().email('Некоректний e-mail').required('Заповнiть поле'),password:Yup.string().min(4,'Мiн. довжина 4 символи').max(32,'Макс. довжина 32 символи').required('Заповнiть поле'),passwordConfirm:Yup.string().required('Паролi не спiвпадають').oneOf([Yup.ref('password'),null],'Паролi не спiвпадають'),firstName:Yup.string().matches(/^[a-z\\s]+$/i,'Тiльки латиниця').max(32,'Макс. довжина 32 символи').required('Заповнiть поле'),lastName:Yup.string().matches(/^[a-z\\s]+$/i,'Тiльки латиниця').max(32,'Макс. довжина 32 символи').required('Заповнiть поле'),code:Yup.string().required('Заповнiть поле')}),onSubmit:onSubmit},formik=>/*#__PURE__*/React.createElement(Form,{className:\"auth_form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"auth_form-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"auth_form-group\"},/*#__PURE__*/React.createElement(Field,{title:\"i\\u043C`\\u044F\",type:\"text\",name:\"firstName\",placeholder:\"John\"}),/*#__PURE__*/React.createElement(Field,{title:\"\\u041F\\u0440i\\u0437\\u0432\\u0438\\u0449\\u0435\",type:\"text\",name:\"lastName\",placeholder:\"Doe\"})),/*#__PURE__*/React.createElement(Field,{title:\"E-mail\",type:\"email\",name:\"email\",placeholder:\"\"}),/*#__PURE__*/React.createElement(GradientButton,{type:\"button\",color:\"green\",onClick:()=>{if(formik.values.email&&!formik.errors.email)rpc.callServer('Auth-GetRegisterCode',trim(formik.values.email).toLowerCase()).then(()=>showNotification('info','Перевiрте ваш e-mail')).catch(()=>formik.setFieldError('email','E-mail зайнятий'));}},\"\\u041D\\u0430\\u0434i\\u0441\\u043B\\u0430\\u0442\\u0438 \\u043A\\u043E\\u0434\"),/*#__PURE__*/React.createElement(\"div\",{className:\"auth_form-group\"},/*#__PURE__*/React.createElement(Field,{title:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",type:\"password\",name:\"password\",placeholder:\"********\"}),/*#__PURE__*/React.createElement(Field,{title:\"\\u041Fi\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0436\\u0435\\u043D\\u043D\\u044F\",type:\"password\",name:\"passwordConfirm\",placeholder:\"********\"})),/*#__PURE__*/React.createElement(Field,{className:\"auth_form-part\",title:\"\\u043A\\u043E\\u0434 \\u043Fi\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0436\\u0435\\u043D\\u043D\\u044F\",type:\"text\",name:\"code\",placeholder:\"\\u041F\\u0435\\u0440\\u0435\\u0432i\\u0440\\u0442\\u0435 \\u0432\\u0430\\u0448 e-mail\"})),/*#__PURE__*/React.createElement(GradientButton,{type:\"submit\"},\"\\u0421\\u0442\\u0432\\u043E\\u0440\\u0438\\u0442\\u0438\"))),/*#__PURE__*/React.createElement(OutlineButton,{className:\"auth_back-btn\",onClick:toLogin},\"\\u041D\\u0430\\u0437\\u0430\\u0434\"));}","map":null,"metadata":{},"sourceType":"module"}