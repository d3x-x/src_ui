{"ast":null,"code":"import React,{Component}from'react';import{Page,Navbar,List,ListItem}from'framework7-react';import moment from'moment-timezone';import rpc from'utils/rpc';import inventoryItems from'data/inventory.json';const actions={craft:'Крафт',put:'Положил',took:'Взял'};export default class FactionJournal extends Component{constructor(){super(...arguments);this.state={loading:false,hasMore:true,items:[]};}componentDidMount(){this.loadMore();}async loadMore(){const{items,hasMore,loading}=this.state;if(loading||!hasMore)return;this.setState(()=>({loading:true}));const data=await rpc.callServer('FactionJournal-GetList',items.length);this.setState(state=>({items:[...state.items,...data],hasMore:data.length>=10,loading:false}));}render(){const{items,hasMore,loading}=this.state;return/*#__PURE__*/React.createElement(Page,{infinite:hasMore,infinitePreloader:loading,onInfinite:this.loadMore.bind(this)},/*#__PURE__*/React.createElement(Navbar,{title:\"\\u0416\\u0443\\u0440\\u043D\\u0430\\u043B \\u0434i\\u0439\"}),/*#__PURE__*/React.createElement(List,{mediaList:true,inset:true},items.map((item,index)=>{var _item$thing$name,_item$thing;return/*#__PURE__*/React.createElement(ListItem,{key:index,title:item.member,after:actions[item.action],subtitle:\"\".concat((_item$thing$name=(_item$thing=inventoryItems[item.thing])===null||_item$thing===void 0?void 0:_item$thing.name)!==null&&_item$thing$name!==void 0?_item$thing$name:item.thing,\" - \").concat(item.amount),text:moment(item.createdAt).format('DD.MM.YY, HH:mm')});})));}}","map":null,"metadata":{},"sourceType":"module"}