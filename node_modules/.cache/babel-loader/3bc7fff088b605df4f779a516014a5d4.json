{"ast":null,"code":"import React,{Component}from'react';import rpc from'utils/rpc';import PrimaryTitle from'components/Common/primary-title';import OutlineButton from'components/Common/outline-button';import GradientButton from'components/Common/gradient-button';import Selector from'components/Common/selector';import vehicleList from'data/vehicles.json';import Spec from'../spec';import Bottom from'../bottom';export default class VehicleTrade extends Component{constructor(){super(...arguments);this.state={vehicles:[],selectedVehicle:'',seller:'',price:0,model:'',govNumber:'',owners:0,tuning:{armor:0,engine:0,brakes:0,transmission:0,turbo:0}};}componentDidMount(){const{vehicles}=this.props.location.state;this.setState(()=>({...this.props.location.state}));if(vehicles)this.selectVehicle(vehicles[0]);}async selectVehicle(id){const data=await rpc.callServer('VehicleTrade-GetData',id);if(data)this.setState(()=>({...data,selectedVehicle:id}));}changePrice(value){this.setState(()=>({price:value}));}sell(){const{seller,selectedVehicle,vehicles,...data}=this.state;if(!data.price||data.price<=0)return;rpc.callClient('VehicleTrade-SendOffer',[selectedVehicle,data]);}buy(){rpc.callClient('VehicleTrade-ConfirmOffer');}refuse(){rpc.callClient('VehicleTrade-RefuseOffer');}render(){const{vehicles,price,selectedVehicle,model,govNumber,owners,tuning,seller}=this.state;return/*#__PURE__*/React.createElement(\"div\",{className:\"trading trading--vehicle\"},/*#__PURE__*/React.createElement(\"div\",{className:\"trading_top\"},/*#__PURE__*/React.createElement(PrimaryTitle,{className:\"trading_title\"},\"\".concat(seller?'Купівля':' продаж',\" \\u0422\\u0417\")),/*#__PURE__*/React.createElement(Selector,{className:\"trading_selector\",items:vehicles,value:selectedVehicle,customValue:vehicleList[model],onChange:this.selectVehicle.bind(this)}),/*#__PURE__*/React.createElement(\"div\",{className:\"trading_info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"trading_info-items\"},/*#__PURE__*/React.createElement(\"p\",{className:\"trading_info-item\"},\"\\u0414\\u0435\\u0440\\u0436. \\u043D\\u043E\\u043C\\u0435\\u0440: \",/*#__PURE__*/React.createElement(\"b\",null,govNumber)),/*#__PURE__*/React.createElement(\"p\",{className:\"trading_info-item\"},\"\\u0412\\u043B\\u0430\\u0441\\u043D\\u0438\\u043A\\u0456\\u0432: \",/*#__PURE__*/React.createElement(\"b\",null,owners))),/*#__PURE__*/React.createElement(Spec,{type:\"vehicle\",items:tuning}))),/*#__PURE__*/React.createElement(Bottom,{seller:seller,price:price,setPrice:this.changePrice.bind(this)}),/*#__PURE__*/React.createElement(\"div\",{className:\"trading_footer\"},/*#__PURE__*/React.createElement(OutlineButton,{onClick:this.refuse},\"\\u0417\\u0430\\u043A\\u0440\\u0438\\u0442\\u0438\"),seller?/*#__PURE__*/React.createElement(GradientButton,{onClick:this.buy},\"\\u041A\\u0443\\u043F\\u0438\\u0442\\u0438\"):/*#__PURE__*/React.createElement(GradientButton,{onClick:this.sell.bind(this)},\"\\u0417\\u0430\\u043F\\u0440\\u043E\\u043F\\u043E\\u043D\\u0443\\u0432\\u0430\\u0442\\u0438\")));}}","map":null,"metadata":{},"sourceType":"module"}