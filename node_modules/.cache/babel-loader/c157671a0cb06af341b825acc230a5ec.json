{"ast":null,"code":"import React,{Component}from'react';import{Page,Navbar,List,ListItem,BlockHeader,Toggle}from'framework7-react';import rpc from'utils/rpc';import prettify from'utils/prettify';const permissionList={garage:'Гараж',inventory:'Склад',workshop:'Майстерня',warehouse:'Склад матерiалiв',wanted:'Розшук та арешт',members:'Керувати учасниками'};export default class RankItem extends Component{constructor(){super(...arguments);this.state={salary:0,permissions:{},updated:false};}componentDidMount(){this.getRankData();}async getRankData(){const data=await rpc.callServer('Faction-GetRankData',this.props.rank.id);this.setState(()=>({...data}));}togglePermission(name){const{permissions}=this.state;this.setState(()=>({permissions:{...permissions,[name]:!permissions[name]},updated:true}));}async updateRank(){const{rank}=this.props;const{permissions,updated}=this.state;if(updated){await rpc.callServer('FactionLeader-EditRank',[rank.id,permissions]);}}render(){const{rank}=this.props;const{salary,permissions}=this.state;return/*#__PURE__*/React.createElement(Page,null,/*#__PURE__*/React.createElement(Navbar,{title:rank.name,backLink:\"\\u041D\\u0430\\u0437\\u0430\\u0434\",onClickBack:this.updateRank.bind(this)}),/*#__PURE__*/React.createElement(List,{inset:true},/*#__PURE__*/React.createElement(ListItem,{title:\"\\u0417\\u0430\\u0440\\u043F\\u043B\\u0430\\u0442\\u0430\",after:prettify.price(salary)})),/*#__PURE__*/React.createElement(BlockHeader,null,\"\\u041F\\u0440\\u0430\\u0432\\u0430 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u0430:\"),/*#__PURE__*/React.createElement(List,{inset:true},Object.entries(permissions).map(_ref=>{let[name,access]=_ref;return permissionList[name]&&/*#__PURE__*/React.createElement(ListItem,{key:name,title:permissionList[name]},/*#__PURE__*/React.createElement(Toggle,{slot:\"after\",color:\"green\",name:name,checked:access,onChange:this.togglePermission.bind(this,name)}));})));}}","map":null,"metadata":{},"sourceType":"module"}