{"ast":null,"code":"import React,{Component}from'react';import rpc from'utils/rpc';import withPayment from'components/Common/with-payment';import withRotation from'components/Common/with-rotation';import Selector from'components/Common/selector';import OutlineButton from'components/Common/outline-button';import GradientButton from'components/Common/gradient-button';import Categories from'./categories';import Color from'./color';import Price from'./price';import Hint from'./hint';class ClothingShop extends Component{constructor(){super(...arguments);this.state={activeCategory:'hat',items:0,colors:1,currentItem:0,currentColor:0,price:0};this.buy=async payment=>{const{activeCategory,currentItem,currentColor}=this.state;const data={type:activeCategory,index:currentItem,color:currentColor};await rpc.callServer('ClothingShop-Buy',[data,payment]);};}componentDidMount(){rpc.register('ClothingShop-SetData',this.setClothesData.bind(this));this.setCategory(this.state.activeCategory);}componentWillUnmount(){rpc.unregister('ClothingShop-SetData');}setClothesData(data){this.setState(()=>data);}async setCategory(name){const amount=await rpc.callClient('ClothingShop-ChangeType',name);this.setState(()=>({activeCategory:name,items:amount,currentItem:0,currentColor:0}));}async changeItem(index){await this.setState(()=>({currentItem:index,currentColor:0}));await rpc.callClient('ClothingShop-ChangeItem',[index,0,true]);}async changeСolor(index){await this.setState(()=>({currentColor:index}));await rpc.callClient('ClothingShop-ChangeItem',[this.state.currentItem,index]);}render(){const{activeCategory,items,colors,currentItem,currentColor,price}=this.state;return/*#__PURE__*/React.createElement(\"div\",{className:\"clothing-shop\"},/*#__PURE__*/React.createElement(Hint,null),/*#__PURE__*/React.createElement(Categories,{current:activeCategory,setCategory:this.setCategory.bind(this)}),/*#__PURE__*/React.createElement(\"div\",{className:\"clothing-shop_container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"clothing-shop_main\"},/*#__PURE__*/React.createElement(Selector,{className:\"clothing-shop_selector\",value:currentItem,items:[...Array(items).keys()],onChange:this.changeItem.bind(this)}),/*#__PURE__*/React.createElement(Color,{current:currentColor,amount:colors,setColor:this.changeСolor.bind(this)}),/*#__PURE__*/React.createElement(Price,{value:price})),/*#__PURE__*/React.createElement(\"div\",{className:\"clothing-shop_buttons\"},/*#__PURE__*/React.createElement(GradientButton,{onClick:()=>this.props.showPayment(this.buy)},\"\\u041A\\u0443\\u043F\\u0438\\u0442\\u0438\"),/*#__PURE__*/React.createElement(OutlineButton,{onClick:()=>rpc.callClient('ClothingShop-CloseMenu')},\"\\u0417\\u0430\\u043A\\u0440\\u0438\\u0442\\u0438\"))));}}export default withPayment(withRotation(ClothingShop));","map":null,"metadata":{},"sourceType":"module"}