{"ast":null,"code":"import React,{Component}from'react';import rpc from'utils/rpc';import{showNotification}from'utils/notifications';import prettify from'utils/prettify';import withRotation from'components/Common/with-rotation';import Selector from'components/Common/selector';import GradientButton from'components/Common/gradient-button';import Hint from'components/Common/hint';import Point from'components/Common/point';import vehicles from'data/vehicles.json';import Info from'./info';import Spec from'./spec';import Color from'./color';class VehicleShop extends Component{constructor(){super(...arguments);this.state={type:'',prices:{},color:[0,0,0],selectedVeh:''};}componentDidMount(){const{type,prices}=this.props.location.state;const keys=Object.keys(prices);this.setState(()=>({type,prices}));this.selectVehicle(keys[0]);}getNamesList(items){const names={};items.forEach(item=>{names[item]=vehicles[item];});return names;}async selectVehicle(model){await rpc.callClient('VehicleShop-SetVehicle',model);this.setState(()=>({selectedVeh:model}));}async selectColor(color){await rpc.callClient('VehicleShop-ChangeColor',[color]);this.setState(()=>({color}));}startTestDrive(){rpc.callClient('VehicleShop-TestDrive',this.state.selectedVeh);}async buy(){const{type,selectedVeh,color}=this.state;try{await rpc.callServer('VehicleShop-Buy',[type,selectedVeh,color]);showNotification('success','Ви успiшно придбали ТЗ, доставити його можна через програму в телефонi');}catch(err){showNotification('error',err.msg);}}render(){const{type,prices,selectedVeh,color}=this.state;return/*#__PURE__*/React.createElement(\"div\",{className:\"vehicle-shop\"},/*#__PURE__*/React.createElement(Hint,{className:\"vehicle-shop_hint\",action:\"exit\"},\"\\u041D\\u0430\\u0442\\u0438\\u0441\\u043Di\\u0442\\u044C, \\u0449\\u043E\\u0431 \\u0437\\u0430\\u043A\\u0440\\u0438\\u0442\\u0438 \\u043C\\u0435\\u043D\\u044E\"),/*#__PURE__*/React.createElement(Info,{model:selectedVeh}),/*#__PURE__*/React.createElement(Spec,{model:selectedVeh}),/*#__PURE__*/React.createElement(Color,{current:color,select:this.selectColor.bind(this)}),/*#__PURE__*/React.createElement(\"div\",{className:\"vehicle-shop_main\"},/*#__PURE__*/React.createElement(\"span\",{className:\"vehicle-shop_price\"},type==='vip_shop'?/*#__PURE__*/React.createElement(Point,{className:\"vehicle-shop_price\",amount:prices[selectedVeh]}):prettify.price(prices[selectedVeh])),/*#__PURE__*/React.createElement(Selector,{className:\"vehicle-shop_selector\",items:Object.keys(prices),value:selectedVeh,customValue:vehicles[selectedVeh],onChange:this.selectVehicle.bind(this)}),/*#__PURE__*/React.createElement(\"div\",{className:\"vehicle-shop_buttons\"},/*#__PURE__*/React.createElement(GradientButton,{color:\"purple\",onClick:this.startTestDrive.bind(this)},\"\\u0422\\u0435\\u0441\\u0442-\\u0434\\u0440\\u0430\\u0439\\u0432\"),/*#__PURE__*/React.createElement(GradientButton,{onClick:this.buy.bind(this)},\"\\u041A\\u0443\\u043F\\u0438\\u0442\\u0438\"))));}}export default withRotation(VehicleShop);","map":null,"metadata":{},"sourceType":"module"}