{"ast":null,"code":"import React,{Component}from'react';import rpc from'utils/rpc';import{showNotification}from'utils/notifications';import OutlineButton from'components/Common/outline-button';import GradientButton from'components/Common/gradient-button';import Main from'./main';import Quality from'./quality';import Info from'./info';import Confirm from'./confirm';export default class House extends Component{constructor(){super(...arguments);this.state={showConfirm:false,index:0,type:'low',isOwner:false,entrance:false,locked:false,owner:'',paid:0,price:0,inventory:0,vehicles:0,tax:0};}componentDidMount(){this.setState(()=>this.props.location.state);}toggleConfirmModal(){this.setState(state=>({showConfirm:!state.showConfirm}));}async trade(){const{isOwner}=this.state;try{await rpc.callServer('House-Trade');showNotification('success',isOwner?'Успішний продаж!':'Вітаємо із покупкою! Для оплати послуг перейдіть до банку.');rpc.callClient('Browser-HidePage');}catch(err){if(err.msg)showNotification('error',err.msg);}}async toggleLock(){try{const status=await rpc.callServer('House-ToggleLock');this.setState(()=>({locked:status}));}catch(err){showNotification('error','Немає доступу!');return Promise.reject();}}async toEnter(){try{await rpc.callServer('House-ToEnter');rpc.callClient('Browser-HidePage');}catch(err){showNotification('error','Двері замкнені');}}render(){const{type,isOwner,owner,tax,price,paid,entrance,index,locked,inventory,vehicles,showConfirm}=this.state;return/*#__PURE__*/React.createElement(\"div\",{className:\"house\"},/*#__PURE__*/React.createElement(\"div\",{className:\"house_container\"},/*#__PURE__*/React.createElement(Quality,{type:type}),/*#__PURE__*/React.createElement(Main,{index:index,locked:locked,toggleLock:this.toggleLock.bind(this),inventory:inventory,vehicles:vehicles}),/*#__PURE__*/React.createElement(Info,{isOwner:isOwner,owner:owner,tax:tax,price:price,paid:paid}),/*#__PURE__*/React.createElement(\"div\",{className:\"house_buttons\"},isOwner?/*#__PURE__*/React.createElement(GradientButton,{color:\"purple\",onClick:this.toggleConfirmModal.bind(this)},\"\\u041F\\u0440\\u043E\\u0434\\u0430\\u0442\\u0438\"):/*#__PURE__*/React.createElement(GradientButton,{color:\"green\",disabled:!isOwner&&!!owner,onClick:this.trade.bind(this)},\"\\u041A\\u0443\\u043F\\u0438\\u0442\\u044C\"),/*#__PURE__*/React.createElement(OutlineButton,{isClose:true},\"\\u0412\\u0456\\u0434\\u043C\\u0456\\u043D\\u0430\"),/*#__PURE__*/React.createElement(GradientButton,{onClick:this.toEnter.bind(this)},entrance?'Войти':'Выйти'))),showConfirm&&/*#__PURE__*/React.createElement(Confirm,{submit:this.trade.bind(this),cancel:this.toggleConfirmModal.bind(this)}));}}","map":null,"metadata":{},"sourceType":"module"}