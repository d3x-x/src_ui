{"ast":null,"code":"import React,{Component}from'react';import rpc from'utils/rpc';import PrimaryTitle from'components/Common/primary-title';import OutlineButton from'components/Common/outline-button';import GradientButton from'components/Common/gradient-button';import Selector from'components/Common/selector';import Spec from'../spec';import Bottom from'../bottom';const types=['low','average','premium'];export default class HouseSale extends Component{constructor(){super(...arguments);this.state={houses:[],selectedHouse:0,seller:'',price:0,type:'low',govPrice:0,garage:0,safe:0};}componentDidMount(){const data=this.props.location.state;this.setState(()=>data);this.selectHouse(data.houses[0]);}async selectHouse(index){const data=await rpc.callServer('HouseTrade-GetData',index);this.setState(()=>({...data,selectedHouse:index}));}changePrice(value){this.setState(()=>({price:value}));}sell(){const{price,selectedHouse}=this.state;rpc.callClient('HouseTrade-SendOffer',[selectedHouse,price]);}buy(){rpc.callClient('HouseTrade-ConfirmOffer');}refuse(){rpc.callClient('HouseTrade-RefuseOffer');}render(){const{houses,selectedHouse,price,type,garage,safe,seller,govPrice}=this.state;return/*#__PURE__*/React.createElement(\"div\",{className:\"trading trading--house\"},/*#__PURE__*/React.createElement(\"div\",{className:\"trading_top\"},/*#__PURE__*/React.createElement(PrimaryTitle,{className:\"trading_title\"},\"\".concat(seller?'Покупка':'Продаж',\" \\u0431\\u0443\\u0434\\u0438\\u043D\\u043A\\u0430\")),/*#__PURE__*/React.createElement(Selector,{className:\"trading_selector\",items:houses,value:selectedHouse,customValue:\"\\u0414\\u043E\\u043C \\u2116\".concat(selectedHouse),onChange:this.selectHouse.bind(this)}),/*#__PURE__*/React.createElement(\"div\",{className:\"trading_info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"trading_info-items\"},/*#__PURE__*/React.createElement(\"p\",{className:\"trading_info-item\"},\"\\u0414\\u0435\\u0440\\u0436. \\u0446\\u0435\\u043D\\u0430: \",/*#__PURE__*/React.createElement(\"b\",null,govPrice,\"$\"))),/*#__PURE__*/React.createElement(Spec,{type:\"house\",items:{star:types.indexOf(type.split('_')[0])+1,garage,safe}}))),/*#__PURE__*/React.createElement(Bottom,{seller:seller,price:price,setPrice:this.changePrice.bind(this)}),/*#__PURE__*/React.createElement(\"div\",{className:\"trading_footer\"},/*#__PURE__*/React.createElement(OutlineButton,{onClick:this.refuse},\"\\u0417\\u0430\\u043A\\u0440\\u0438\\u0442\\u0438\"),seller?/*#__PURE__*/React.createElement(GradientButton,{onClick:this.buy},\"\\u041A\\u0443\\u043F\\u0438\\u0442\\u0438\"):/*#__PURE__*/React.createElement(GradientButton,{onClick:this.sell.bind(this)},\"\\u0417\\u0430\\u043F\\u0440\\u043E\\u043F\\u043E\\u043D\\u0443\\u0432\\u0430\\u0442\\u0438\")));}}","map":null,"metadata":{},"sourceType":"module"}