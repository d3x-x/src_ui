{"ast":null,"code":"import React,{Component}from'react';import rpc from'utils/rpc';import{showNotification}from'utils/notifications';import OutlineButton from'components/Common/outline-button';import GradientButton from'components/Common/gradient-button';import BusinessConfirm from'./confirm';import Main from'./main';export default class Business extends Component{constructor(){super(...arguments);this.state={isOwner:false,owner:'',price:0,income:0,paid:0,tax:0,paymentTime:null,name:'',showConfirm:false};}componentDidMount(){this.setState(()=>this.props.location.state);}toggleConfirmModal(){this.setState(state=>({showConfirm:!state.showConfirm}));}setPaymentTime(time){this.setState(()=>({paymentTime:time}));}async startWork(){const time=await rpc.callServer('Business-Start');this.setPaymentTime(time);}async finishWork(){await rpc.callServer('Business-Finish');this.setPaymentTime(null);}async trade(){const{isOwner}=this.state;try{await rpc.callServer('Business-Trade');showNotification('success',isOwner?'Успішний продаж!':'Вітаємо із покупкою! Для оплати послуг перейдіть до банку.');rpc.callClient('Browser-HidePage');}catch(err){if(err.msg)showNotification('error',err.msg);}}render(){const{showConfirm,isOwner,owner,paymentTime,income,paid,tax,name,price}=this.state;return/*#__PURE__*/React.createElement(\"div\",{className:\"business\"},/*#__PURE__*/React.createElement(\"div\",{className:\"business_container\"},/*#__PURE__*/React.createElement(Main,{isOwner:isOwner,owner:owner,name:name,income:income,paid:paid,price:price,tax:tax,paymentTime:paymentTime}),/*#__PURE__*/React.createElement(\"div\",{className:\"business_buttons\"},isOwner?/*#__PURE__*/React.createElement(GradientButton,{color:\"purple\",onClick:this.toggleConfirmModal.bind(this)},\"\\u041F\\u0440\\u043E\\u0434\\u0430\\u0442\\u0438\"):/*#__PURE__*/React.createElement(GradientButton,{color:\"green\",disabled:!isOwner&&!!owner,onClick:this.trade.bind(this)},\"\\u041F\\u0440\\u0438\\u0434\\u0431\\u0430\\u0442\\u0438\"),/*#__PURE__*/React.createElement(OutlineButton,{isClose:true},\"\\u0412\\u0438\\u0439\\u0442\\u0438\"),isOwner&&(paymentTime===null?/*#__PURE__*/React.createElement(GradientButton,{disabled:!isOwner,onClick:this.startWork.bind(this)},\"\\u041F\\u043E\\u0447\\u0430\\u0442\\u0438\"):/*#__PURE__*/React.createElement(GradientButton,{disabled:!isOwner||paymentTime>0,onClick:this.finishWork.bind(this)},\"\\u0417\\u0430\\u043A\\u0456\\u043D\\u0447\\u0438\\u0442\\u0438\")))),showConfirm&&/*#__PURE__*/React.createElement(BusinessConfirm,{submit:this.trade.bind(this),cancel:this.toggleConfirmModal.bind(this)}));}}","map":null,"metadata":{},"sourceType":"module"}