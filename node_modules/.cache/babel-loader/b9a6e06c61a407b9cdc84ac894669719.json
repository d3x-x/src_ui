{"ast":null,"code":"import React,{Component}from'react';import{connect}from'react-redux';import{Page,Navbar,List,ListItem}from'framework7-react';import rpc from'utils/rpc';import{loadMembers}from'store/tablet/members/actions';class Members extends Component{constructor(){super(...arguments);this.state={loading:false,hasMore:true};}componentDidMount(){if(this.props.members.length)return;this.getMembers();}async getMembers(){const{hasMore,loading}=this.state;if(loading||!hasMore)return;this.setState(()=>({loading:true}));const members=await rpc.callServer('Faction-GetMembers',this.props.members.length);this.props.loadMembers(members);this.setState(()=>({loading:false,hasMore:members.length>=15}));}render(){const{members}=this.props;const{hasMore,loading}=this.state;return/*#__PURE__*/React.createElement(Page,{infinite:hasMore,infinitePreloader:loading,onInfinite:this.getMembers.bind(this)},/*#__PURE__*/React.createElement(Navbar,{title:\"\\u0441\\u043A\\u043B\\u0430\\u0434\"}),/*#__PURE__*/React.createElement(List,{inset:true},members.map(item=>/*#__PURE__*/React.createElement(ListItem,{link:\"member/\",key:item.userId,title:item.name,after:item.online?'Онлайн':'',routeProps:{member:item}}))));}}const mapStateToProps=_ref=>{let{tablet}=_ref;return{members:tablet.members.items};};const mapDispatchToProps={loadMembers};export default connect(mapStateToProps,mapDispatchToProps)(Members);","map":null,"metadata":{},"sourceType":"module"}