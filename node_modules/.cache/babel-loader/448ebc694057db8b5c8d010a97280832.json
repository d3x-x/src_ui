{"ast":null,"code":"import React,{Component}from'react';import{Page,Navbar,List,ListItem}from'framework7-react';import moment from'moment-timezone';import rpc from'utils/rpc';import{showNotification}from'utils/notifications';export default class MedicCalls extends Component{constructor(){super(...arguments);this.state={calls:[]};}componentDidMount(){rpc.callServer('EmsCalls-GetList').then(calls=>this.setState(()=>({calls})));}async acceptCall(id){try{await rpc.callServer('EmsCalls-Accept',id);this.setState(state=>({calls:state.calls.filter(item=>item.id!==id)}));}catch(err){if(err.msg)showNotification('error',err.msg);}}render(){const{calls}=this.state;return/*#__PURE__*/React.createElement(Page,null,/*#__PURE__*/React.createElement(Navbar,{title:\"\\u0412\\u0438\\u043A\\u043B\\u0438\\u043A\\u0438\"}),/*#__PURE__*/React.createElement(List,{mediaList:true,inset:true},calls.map(call=>/*#__PURE__*/React.createElement(ListItem,{checkbox:true,key:call.id,title:call.victim,footer:\"\".concat(Math.floor(call.dist),\" \\u043C\\u0435\\u0442\\u0440i\\u0432\"),after:moment(call.createdAt).format('HH:mm'),onChange:this.acceptCall.bind(this,call.id)}))));}}","map":null,"metadata":{},"sourceType":"module"}