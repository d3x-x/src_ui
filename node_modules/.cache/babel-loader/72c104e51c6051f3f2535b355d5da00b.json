{"ast":null,"code":"import React,{Component}from'react';import{connect}from'react-redux';import rpc from'utils/rpc';import{setCall}from'store/phone/actions';import prettify from'utils/prettify';import Incoming from'./incoming';import Outgoing from'./outgoing';class Call extends Component{constructor(){super(...arguments);this.state={interlocutor:'Anonymous'};}componentDidMount(){this.getInterlocutorName();}async getInterlocutorName(){const{call}=this.props.phone;if(call){const contact=await rpc.callServer('Phone-GetContactByNumber',call.phoneNumber);this.setState(()=>({interlocutor:contact?\"\".concat(contact.firstName,\" \").concat(contact.lastName):prettify.phoneNumber(call.phoneNumber)}));}}async acceptCall(){const{call}=this.props.phone;if(!call)return;try{await rpc.callServer('Phone-AcceptCall');this.props.setCall({type:'outgoing',phoneNumber:call.phoneNumber,isRecieve:true});}catch(err){this.declineCall();}}declineCall(){const{call}=this.props.phone;if(call)rpc.callServer('Phone-DeclineCall');}onControlClick(control){switch(control){case'accept':return this.acceptCall();case'decline':return this.declineCall();default:break;}}render(){const{interlocutor}=this.state;const{call}=this.props.phone;return call&&/*#__PURE__*/React.createElement(\"div\",{className:\"call\"},call.type==='incoming'?/*#__PURE__*/React.createElement(Incoming,{name:interlocutor,onControlClick:this.onControlClick.bind(this)}):/*#__PURE__*/React.createElement(Outgoing,{name:interlocutor,isRecieveCall:!!call.isRecieve,onControlClick:this.onControlClick.bind(this)}));}}const mapStateToProps=state=>({phone:state.phone});export default connect(mapStateToProps,{setCall})(Call);","map":null,"metadata":{},"sourceType":"module"}