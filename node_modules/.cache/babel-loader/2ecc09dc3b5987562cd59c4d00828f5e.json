{"ast":null,"code":"import React,{Component}from'react';import rpc from'utils/rpc';import prettify from'utils/prettify';import PrimaryTitle from'components/Common/primary-title';import OutlineButton from'components/Common/outline-button';import GradientButton from'components/Common/gradient-button';import Selector from'components/Common/selector';import Bottom from'../bottom';export default class BusinessSale extends Component{constructor(){super(...arguments);this.state={items:[],selectedItem:0,price:0,seller:'',name:'',govPrice:0,income:0};}componentDidMount(){const data=this.props.location.state;this.setState(()=>data);this.selectItem(data.items[0]);}async selectItem(index){const data=await rpc.callServer('BusinessTrade-GetData',index);this.setState(()=>({...data,selectedItem:index}));}changePrice(value){this.setState(()=>({price:value}));}sell(){const{price,selectedItem}=this.state;rpc.callClient('BusinessTrade-SendOffer',[selectedItem,price]);}buy(){rpc.callClient('BusinessTrade-ConfirmOffer');}refuse(){rpc.callClient('BusinessTrade-RefuseOffer');}render(){const{items,selectedItem,price,seller,govPrice,name,income}=this.state;return/*#__PURE__*/React.createElement(\"div\",{className:\"trading trading--business\"},/*#__PURE__*/React.createElement(\"div\",{className:\"trading_top\"},/*#__PURE__*/React.createElement(PrimaryTitle,{className:\"trading_title\"},\"\".concat(seller?'Покупка':'Продаж',\" \\u0431i\\u0437\\u043D\\u0435\\u0441\\u0443\")),/*#__PURE__*/React.createElement(Selector,{className:\"trading_selector\",items:items,value:selectedItem,customValue:name,onChange:this.selectItem.bind(this)}),/*#__PURE__*/React.createElement(\"div\",{className:\"trading_info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"trading_info-items\"},/*#__PURE__*/React.createElement(\"p\",{className:\"trading_info-item\"},\"\\u0414\\u0435\\u0440\\u0436. \\u0446i\\u043D\\u0430: \",/*#__PURE__*/React.createElement(\"b\",null,prettify.price(govPrice))),/*#__PURE__*/React.createElement(\"p\",{className:\"trading_info-item\"},\"\\u0414\\u043E\\u0445i\\u0434: \",/*#__PURE__*/React.createElement(\"b\",null,prettify.price(income)))))),/*#__PURE__*/React.createElement(Bottom,{seller:seller,price:price,setPrice:this.changePrice.bind(this)}),/*#__PURE__*/React.createElement(\"div\",{className:\"trading_footer\"},/*#__PURE__*/React.createElement(OutlineButton,{onClick:this.refuse},\"\\u0417\\u0430\\u043A\\u0440\\u0438\\u0442\\u0438\"),seller?/*#__PURE__*/React.createElement(GradientButton,{onClick:this.buy},\"\\u041F\\u0440\\u0438\\u0434\\u0431\\u0430\\u0442\\u0438\"):/*#__PURE__*/React.createElement(GradientButton,{onClick:this.sell.bind(this)},\"\\u0417\\u0430\\u043F\\u0440\\u043E\\u043F\\u043E\\u043D\\u0443\\u0432\\u0430\\u0442\\u0438\")));}}","map":null,"metadata":{},"sourceType":"module"}