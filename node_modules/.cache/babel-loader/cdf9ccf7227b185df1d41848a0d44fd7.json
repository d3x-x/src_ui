{"ast":null,"code":"import React,{Component}from'react';import*as Yup from'yup';import{Page,Navbar,BlockHeader,List,ListItem,ListButton,ListInput}from'framework7-react';import{Formik,Form}from'formik';import{showNotification}from'utils/notifications';import rpc from'utils/rpc';import factions from'data/factions.json';export default class FactionMaterials extends Component{constructor(){super(...arguments);this.state={materials:{}};}componentDidMount(){rpc.callServer('Faction-GetMaterials').then(data=>this.setState(()=>({materials:data})));}async createOrder(forArmy,amount){try{await rpc.callServer('Factions-OrderMaterials',[forArmy,amount]);showNotification('success','Ви зробили замовлення матеріалів');}catch(err){if(err.msg)showNotification('error',err.msg);}}render(){const{materials}=this.state;return/*#__PURE__*/React.createElement(Page,null,/*#__PURE__*/React.createElement(Navbar,{title:\"\\u041C\\u0430\\u0442\\u0435\\u0440\\u0456\\u0430\\u043B\\u0438\"}),/*#__PURE__*/React.createElement(BlockHeader,null,\"\\u0411\\u0430\\u043B\\u0430\\u043D\\u0441 \\u043E\\u0440\\u0433\\u0430\\u043D\\u0456\\u0437\\u0430\\u0446\\u0456\\u0439\"),/*#__PURE__*/React.createElement(List,{inset:true},Object.entries(materials).map(_ref=>{let[name,amount]=_ref;return/*#__PURE__*/React.createElement(ListItem,{key:name,title:factions[name],after:amount.toString()});})),/*#__PURE__*/React.createElement(BlockHeader,null,\"\\u041F\\u043E\\u0441\\u0442\\u0430\\u0447\\u0430\\u043D\\u043D\\u044F\"),/*#__PURE__*/React.createElement(Formik,{initialValues:{army:false,amount:''},validationSchema:Yup.object({amount:Yup.number().required().min(1).max(100000000)}),onSubmit:values=>this.createOrder(values.army,+values.amount)},_ref2=>{let{values,handleChange,submitForm}=_ref2;return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(List,{inset:true},/*#__PURE__*/React.createElement(ListInput,{clearButton:true,name:\"amount\",type:\"number\",placeholder:\"\\u041A\\u0456\\u043B\\u044C\\u043A\\u0456\\u0441\\u0442\\u044C \\u043C\\u0430\\u0442\\u0456\\u0432\",value:values.amount,onChange:handleChange,onInputClear:handleChange}),/*#__PURE__*/React.createElement(ListItem,{checkbox:true,title:\"\\u0410\\u0440\\u043C\\u0456\\u044F\",name:\"army\",checked:values.army,onChange:handleChange}),/*#__PURE__*/React.createElement(ListButton,{title:\"\\u0417\\u0430\\u043C\\u043E\\u0432\\u0438\\u0442\\u0438\",onClick:submitForm})));}));}}","map":null,"metadata":{},"sourceType":"module"}