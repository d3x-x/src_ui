{"ast":null,"code":"import React,{Component}from'react';import rpc from'utils/rpc';import withPayment from'components/Common/with-payment';import PrimaryTitle from'components/Common/primary-title';import TotalPrice from'components/Common/total-price';import OutlineButton from'components/Common/outline-button';import GradientButton from'components/Common/gradient-button';import Products from'./products';import Quantity from'./quantity';class Supermarket extends Component{constructor(){super(...arguments);this.state={prices:{}};}componentDidMount(){this.setState(()=>this.props.location.state);}selectProduct(name){this.setState(()=>({selectedProduct:{name,amount:1}}));}changeAmountOfProduct(value){const{selectedProduct}=this.state;if(selectedProduct){this.setState(()=>({selectedProduct:{...selectedProduct,amount:value}}));}}getTotalPrice(){const{prices,selectedProduct}=this.state;return selectedProduct?selectedProduct.amount*prices[selectedProduct.name]:0;}async buy(payment){const{selectedProduct}=this.state;if(!selectedProduct)return;await rpc.callServer('Supermarket-Buy',[selectedProduct,payment]);this.setState(()=>({selectedProduct:undefined}));}render(){var _selectedProduct$amou;const{prices,selectedProduct}=this.state;return/*#__PURE__*/React.createElement(\"div\",{className:\"supermarket\"},/*#__PURE__*/React.createElement(\"div\",{className:\"supermarket_container\"},/*#__PURE__*/React.createElement(PrimaryTitle,{className:\"supermarket_title\"},\"\\u041C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D 24/7\"),/*#__PURE__*/React.createElement(Products,{items:prices,selected:selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.name,selectItem:this.selectProduct.bind(this)}),/*#__PURE__*/React.createElement(Quantity,{value:(_selectedProduct$amou=selectedProduct===null||selectedProduct===void 0?void 0:selectedProduct.amount)!==null&&_selectedProduct$amou!==void 0?_selectedProduct$amou:0,select:this.changeAmountOfProduct.bind(this)})),/*#__PURE__*/React.createElement(\"div\",{className:\"supermarket_footer\"},/*#__PURE__*/React.createElement(OutlineButton,{isClose:true},\"\\u0417\\u0430\\u043A\\u0440\\u0438\\u0442\\u0438\"),/*#__PURE__*/React.createElement(TotalPrice,{className:\"supermarket_price\",titleClassName:\"supermarket_price-title\",value:this.getTotalPrice()}),/*#__PURE__*/React.createElement(GradientButton,{onClick:()=>this.props.showPayment(this.buy.bind(this))},\"\\u041A\\u0443\\u043F\\u0438\\u0442\\u0438\")));}}export default withPayment(Supermarket);","map":null,"metadata":{},"sourceType":"module"}