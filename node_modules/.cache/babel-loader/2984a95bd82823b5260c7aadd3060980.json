{"ast":null,"code":"import React,{Component}from'react';import rpc from'utils/rpc';import images from'utils/images';import{showNotification}from'utils/notifications';import PrimaryTitle from'components/Common/primary-title';import OutlineButton from'components/Common/outline-button';import GradientButton from'components/Common/gradient-button';import Level from'./level';import Info from'./info';import jobs from'./data';export default class Job extends Component{constructor(){super(...arguments);this.state={name:'waterfront',level:0,progress:0,selectedLevel:0,isWorking:false};}componentDidMount(){if(!this.props.location.state)return;const{level}=this.props.location.state;this.setState(()=>({...this.props.location.state,selectedLevel:level}));}selectLevel(level){if(this.state.level<level)return;this.setState(()=>({selectedLevel:level}));}async startWork(){const{name,selectedLevel}=this.state;try{await rpc.callServer('Jobs-StartWork',[name,selectedLevel]);this.closeMenu();}catch(err){if(err.msg)showNotification('error',err.msg);}}finishWork(){rpc.callClient('Job-FinishWork').then(this.closeMenu);}closeMenu(){rpc.callClient('Browser-HidePage');}render(){const{level,selectedLevel,progress,isWorking}=this.state;const name=this.state.name.toLowerCase();const data=jobs[name];return/*#__PURE__*/React.createElement(\"div\",{className:\"job\",style:{backgroundImage:\"url(\".concat(images.getImage(\"\".concat(name,\".jpg\"),'jobs'),\")\")}},/*#__PURE__*/React.createElement(\"div\",{className:\"job_container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"job_main\"},/*#__PURE__*/React.createElement(PrimaryTitle,{className:\"job_main-title\"},\"\\u0420\\u043E\\u0431\\u043E\\u0442\\u0430\"),/*#__PURE__*/React.createElement(\"h3\",{className:\"job_main-name\"},data.title),/*#__PURE__*/React.createElement(Level,{current:selectedLevel,progress:selectedLevel<level?100:progress,selectLeveL:this.selectLevel.bind(this)})),/*#__PURE__*/React.createElement(Info,{requirements:data.requirements,description:data.description}),/*#__PURE__*/React.createElement(\"div\",{className:\"job_footer\"},/*#__PURE__*/React.createElement(OutlineButton,{isClose:true},\"\\u0417\\u0430\\u043A\\u0440\\u0438\\u0442\\u0438\"),/*#__PURE__*/React.createElement(GradientButton,{onClick:()=>isWorking?this.finishWork():this.startWork()},isWorking?'Звiльнитися':'Влаштуватися'))));}}","map":null,"metadata":{},"sourceType":"module"}