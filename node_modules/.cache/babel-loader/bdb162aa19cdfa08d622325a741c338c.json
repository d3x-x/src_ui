{"ast":null,"code":"import React,{Component,Fragment}from'react';import rpc from'utils/rpc';import{CSSTransition}from'react-transition-group';import{connect}from'react-redux';import images from'utils/images';import PhoneContext from'./context';import apps from'./apps';import Brow from'./brow';import StatusBar from'./status-bar';import Main from'./main';import Call from'./call';class Phone extends Component{constructor(){super(...arguments);this.state={visible:false};}componentDidMount(){rpc.register('Phone-CanClose',()=>!document.activeElement||document.activeElement.tagName!=='INPUT');setTimeout(()=>this.setState(()=>({visible:true})),100);}componentDidUpdate(prevProps){if(this.props.call&&!prevProps.call)this.openApp('');}shouldComponentUpdate(nextProps,nextState){return!nextState.app||apps[nextState.app].component!==Main;}getAppComponent(){const{app}=this.state;return app?apps[app].component:Main;}openApp(name){this.setState(()=>({app:name}));}render(){const{app,visible}=this.state;const{date,call,wallpaper}=this.props;return/*#__PURE__*/React.createElement(PhoneContext.Provider,{value:{openApp:this.openApp.bind(this)}},/*#__PURE__*/React.createElement(CSSTransition,{in:visible,timeout:300,classNames:\"slideUp\",unmountOnExit:true},/*#__PURE__*/React.createElement(\"div\",{className:\"phone\"},/*#__PURE__*/React.createElement(Brow,null),/*#__PURE__*/React.createElement(\"div\",{id:call?'call':app,className:\"phone_container\",style:{backgroundImage:\"url(\".concat(images.getImage(\"\".concat(wallpaper,\"_wp.jpg\"),'phone'),\")\")}},/*#__PURE__*/React.createElement(StatusBar,{date:date}),/*#__PURE__*/React.createElement(CSSTransition,{in:!!app,timeout:{appear:300,enter:300,exit:0},classNames:\"ios\"},call?/*#__PURE__*/React.createElement(Call,null):/*#__PURE__*/React.createElement(Fragment,null,React.createElement(this.getAppComponent()),app&&/*#__PURE__*/React.createElement(\"button\",{className:\"phone_close-btn\",onClick:this.openApp.bind(this,undefined)})))))));}}const mapStateToProps=state=>({date:state.app.date,call:state.phone.call,wallpaper:state.phone.wallpaper});export default connect(mapStateToProps,{})(Phone);","map":null,"metadata":{},"sourceType":"module"}